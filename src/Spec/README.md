_This note is for developers of the AMP PHP Library only. You don't need to read it if you are a consumer of the library_

_Prerequisites_: You should have cloned and installed for development the [Lullabot fork](https://github.com/Lullabot/amphtml) of the [ampproject/amphtml](https://github.com/ampproject/amphtml). Please be sure to switch to the `php-validator-generated` branch. Follow the instructions under "Building a Custom Validator" [here](https://github.com/Lullabot/amphtml/tree/php-validator-generated/validator) and run [`python build.py`](https://github.com/Lullabot/amphtml/blob/php-validator-generated/validator/build.py) when in `cd`-ed in the `validator` folder in your console.

So when you're using the Lullabot fork of [ampproject/amphtml](https://github.com/ampproject/amphtml) and run [`python build.py`](https://github.com/Lullabot/amphtml/blob/php-validator-generated/validator/build.py) (this file is customized in our fork), it, in turn runs file [`validator_gen_php.py`](https://github.com/Lullabot/amphtml/blob/php-validator-generated/validator/validator_gen_php.py). _This_ is the python file that generates the representation in PHP (this file is _only_ available in our fork)

Specifically when [`build.py`](https://github.com/Lullabot/amphtml/blob/php-validator-generated/validator/build.py) is run, it runs [`validator_gen_php.py`](https://github.com/Lullabot/amphtml/blob/php-validator-generated/validator/validator_gen_php.py) which in turns outputs [`validator-generated.php`](https://github.com/Lullabot/amphtml/blob/php-validator-generated/validator/validator_gen_php.py) in the `validator/dist` folder. We simply copy this `validator-generated.php` file into the AMP PHP library `src/Spec` folder. Once this is done, there is no active dependency on the [ampproject/amphtml](https://github.com/ampproject/amphtml) project to run the AMP PHP library. You would only regenerate this file infrequently when you want to synchronize our PHP validator with the canonical validator. Note that this method allows our validator to "auto-magically" pick up new rules for tags when it gets a fresh version of `validator-generated.php`. Of course, this is not perfect for all cases -- sometimes there is no alternative to actually changing our validator code if the canonical validator has picked up some more complicated changes.
